<view class="container"><hospital-header vue-id="8dd740cc-1" bind:__l="__l"></hospital-header><view class="main-content"><view data-event-opts="{{[['tap',[['showHistoryModal',['$event']]]]]}}" class="history-entry" bindtap="__e"><text class="history-text">录入历史数据</text><text class="history-icon">+</text></view><view class="card"><view class="card-header"><text class="card-title">体重记录</text><text class="card-subtitle">每日测量体重，监测腹水变化</text></view><view class="form-item"><text class="label">今日体重 (kg)</text><input class="input-box" type="digit" placeholder="请输入今日体重" data-event-opts="{{[['input',[['__set_model',['$0','weight','$event',[]],['dailyData']],['validateInput',['$event']]]]]}}" value="{{dailyData.weight}}" bindinput="__e"/></view></view><view class="card"><view class="card-header"><text class="card-title">尿量记录</text><text class="card-subtitle">记录每次排尿量，自动计算日总量</text></view><view class="form-item"><text class="label">本次尿量 (ml)</text><view class="input-group"><input class="input-box" type="number" placeholder="请输入本次尿量" data-event-opts="{{[['input',[['__set_model',['','currentUrine','$event',[]]],['validateInput',['$event']]]]]}}" value="{{currentUrine}}" bindinput="__e"/><button class="add-btn" size="mini" data-event-opts="{{[['tap',[['addUrine',['$event']]]]]}}" bindtap="__e">添加</button></view></view><block wx:if="{{$root.g0>0}}"><view class="urine-summary"><text class="summary-title">今日记录</text><view class="urine-total"><text>{{"总量："+dailyData.urine+"ml"}}</text><text>{{"次数："+$root.g1+"次"}}</text></view><view class="urine-list"><block wx:for="{{todayUrineList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="urine-item"><text class="time">{{item.time}}</text><text class="value">{{item.value+"ml"}}</text></view></block></view></view></block></view><view class="action-buttons"><button class="save-btn" type="primary" data-event-opts="{{[['tap',[['saveData',['$event']]]]]}}" bindtap="__e">保存今日数据</button><button data-event-opts="{{[['tap',[['goToTrend',['$event']]]]]}}" class="trend-btn" bindtap="__e">查看趋势分析</button></view><contact-info vue-id="8dd740cc-2" bind:__l="__l"></contact-info></view><block wx:if="{{showModal}}"><view data-event-opts="{{[['tap',[['closeModal',['$event']]]]]}}" class="modal" bindtap="__e"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="modal-content" catchtap="__e"><view class="modal-header"><text class="modal-title">录入历史数据</text><text data-event-opts="{{[['tap',[['closeModal',['$event']]]]]}}" class="modal-close" bindtap="__e">×</text></view><view class="modal-body"><view class="form-item"><text class="label">选择日期</text><picker class="date-picker" mode="date" value="{{historyData.date}}" end="{{today}}" data-event-opts="{{[['change',[['onDateChange',['$event']]]]]}}" bindchange="__e"><view class="picker-value">{{''+(historyData.date||'请选择日期')+''}}</view></picker></view><view class="form-item"><text class="label">体重 (kg)</text><input class="input-box" type="digit" placeholder="请输入体重" data-event-opts="{{[['input',[['__set_model',['$0','weight','$event',[]],['historyData']]]]]}}" value="{{historyData.weight}}" bindinput="__e"/></view><view class="form-item"><text class="label">尿量 (ml)</text><input class="input-box" type="number" placeholder="请输入尿量" data-event-opts="{{[['input',[['__set_model',['$0','urine','$event',[]],['historyData']]]]]}}" value="{{historyData.urine}}" bindinput="__e"/></view></view><view class="modal-footer"><button data-event-opts="{{[['tap',[['closeModal',['$event']]]]]}}" class="cancel-btn" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['saveHistoryData',['$event']]]]]}}" class="confirm-btn" bindtap="__e">保存</button></view></view></view></block></view>